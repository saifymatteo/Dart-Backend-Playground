generator client {
  provider = "dart run orm"
  output   = "../lib/generated"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model account {
  id         BigInt      @id @default(autoincrement())
  username   String   @unique(map: "__account.username")
  password   String
  created_at DateTime @db.Timestamp(6)
  login      login[]
  person     person[]
}

model login {
  id         BigInt      @id @default(autoincrement())
  token      String   @unique(map: "__login.token")
  created_at DateTime @db.Timestamp(6)
  expires_at DateTime @db.Timestamp(6)
  account_id BigInt
  account    account  @relation(fields: [account_id], references: [id], onDelete: SetNull)
}

model person {
  id            BigInt      @id @default(autoincrement())
  first_name    String
  last_name     String
  gender        String
  date_of_birth DateTime @db.Timestamp(6)
  email         String?  @unique(map: "__person.email")
  account_id    BigInt
  account       account  @relation(fields: [account_id], references: [id], onDelete: SetNull)
}
